/*
  nazwa="kSound API"
  data="2003-05-13"
  ver=""
  info="Nag³ówek wtyczki kSound."
*/
/** @file Nag³ówek wtyczki kSound


*/
/** @defgroup SOUND_shared_h Wtyczka kSound.dll.

 kSound odpowiada za odtwarzanie dŸwiêków. 
 Przy pomocy kSound::SoundRegister() mo¿na dodaæ
 nowy dŸwiêk do listy, a nastêpnie go odtworzyæ przez
 kSound::SoundPlay().

 @warning kSound::SoundRegister() mo¿e byæ wywo³any @b tylko
  w momencie otrzymania przez wtyczkê komunikatu
  kSound::DOREGISTER .
  DOREGISTER wywo³ywane jest dwukrotnie. Podczas rejestrowania kolumn i tworzenia
  interfejsu.
  Za ka¿dym razem trzeba zarejestrowaæ TE SAME dŸwiêki!

 Kolumny w konfiguracji nazywane s¹ jako "SOUND_" + nazwa_dŸwiêku.
 Akcje w konfiguracji maj¹ identyfikatory (@a id - ID kolumny z dŸwiêkiem):
   kSound::action::Check | id - Checkbox
   kSound::action::Value | id - Wartoœæ
   kSound::action::Play | id - Play/Stop
 @{
*/
namespace kSound {
	const int REGISTER = IM_USER + 3000;
	const int PLAY = IM_USER + 3001;
	const int DOREGISTER = IM_USER + 3002;
	/** Struktura do wys³ania razem z kSound::SOUND_REGISTER
	*/
	class sIMessage_SoundRegister: public sIMessage_base {
	public:
		int colID; ///< konkretny identyfikator kolumny, lub -1
		const char * name; ///< Jednoznaczna nazwa dŸwiêku (nazwa kolumny w konfiguracji i pola w XMLu)
		const char * info; ///< Informacja przy polu w konfiguracji.
		int flags; ///< Flagi kSound::flags .
		sIMessage_SoundRegister(const char * name , const char * info , int flags = 0 , int colID = -1):sIMessage_base(REGISTER) , colID(colID),name(name),info(info),flags(flags) {
			s_size = sizeof(*this);
			net = NET_SOUND;
			type = IMT_CONFIG;
		}
	};
	namespace flags {
		const char contacts=1; ///< Dla ka¿dego kontaktu przechowywane jest osobne ustawienie.
		const char no_column_register=2; ///< kSound nie zarejestruje kolumny w konfiguracji.
		const char no_action_register=4; ///< kSound nie utworzy akcji...
	};
	namespace action {
		const int Check = 0x1A000000;
		const int Play =  0x1B000000;
		const int Value = 0x1C000000;
		const int mute = NET_SOUND * 1000 + 20;
	};
	namespace Cfg {
		const int mute = NET_SOUND * 1000 + 1;
	};
	/** Rejestruje dŸwiêk. */
	inline void SoundRegister(cCtrl * Ctrl , const char * name , const char * info , int flags = 0 , int colID=-1) {
		sIMessage_SoundRegister sr(name , info , flags , colID);
		Ctrl->IMessage(&sr);
	}
	/** Odgrywa dŸwiêk */
	inline void SoundPlay(cCtrl * Ctrl , const char * name , int cntID=0) {
		Ctrl->IMessage(&sIMessage_2params(PLAY , NET_SOUND , IMT_CONFIG , (int)name , cntID));
	}
};


/// @}